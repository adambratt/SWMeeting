{% extends 'index.html' %}
{% block pagetitle %}{{group.name}} Home{% endblock %}

{% block content %}
<script type='text/javascript'>
    $(function(){
        $('#meeting').click(function(){
            if ( $(this).val() == 'add meeting'){
                $(this).val('');
            }
        });
        $('#add-meeting').click(function(){
            if ( $('#meeting').val() == 'add meeting' || $('#meeting').val() == ''){
                return false;
            }
            $.post('/ajax/create_meeting/',{'name': $('#meeting').val()}, function(data){
                var obj = $.parseJSON(data)
                if ( obj.error ){
                    alert(obj.error)
                    return false;
                }
                location = '/meeting/'+obj.id+'/';
            });
            return false;
        });
        $('#attendee-add').click(function(){
           var name=$('#attendee-name').val();
           var email=$('#attendee-email').val();
           if(name){
                $.post('/ajax/create_attendee/',{'name': name, 'email': email},function(data){
                    location.reload(true);
                });
           }
           return false;
        });
    });
</script>
<div class='row'>
    <div class='twelve columns'>
        <h2>{{group.name}} Home</h2>
        <hr />
    </div>
</div>
<div class='row'>
    <div class='four columns'>
        <h3>Meetings</h3>
        {% if group.meeting_set.all.count %}
        <ul>
            {% for x in group.meeting_set.all %}
            <li><a href='/meeting/{{x.pk}}'>{{x.name}}</a></li>
            {% endfor %}
        </ul>
        {% else %}
            <i>No meetings</i>
        {% endif %}
        <input type='text' name='meeting' value='add meeting' id='meeting' />
        <a href='#' class='small button radius nice blue' id='add-meeting' >Add</a>
    </div>
    <div class='eight columns'>
        <h3>Group Setup</h3>
        <div class='row'>
            <div class='twelve columns'>
                <div>Name: <input type='text' name='name' id='attendee-name' /></div>
                <div>Email (optional): <input type='text' name='email' id='attendee-email' /></div>
                <div><a href='#' id='attendee-add' class='pink button radius nice big'>Add</a></div>
            </div>
        </div>
        {% if group.attendee_set.all.count %}
        <ul>
            {% for x in group.attendee_set.all %}
            <li>{{x.name}} ({{x.email}}) <a href='#'>delete</a></li>
            {% endfor %}
        </ul>
        {% endif %}
    </div>
</div>
{% endblock %}